set -g default-terminal "tmux-256color"

set -g mouse on

# Better terminal capabilities for TUI applications
# set -ga terminal-overrides ",*256col*:Tc"
# set -ga terminal-overrides "*:Ss=\E[%p1%d q:Se=\E[ q"
set-window-option -g mode-keys vi
set -g set-clipboard on
set -g history-limit 1000000

bind-key -T copy-mode-vi 'v' send -X begin-selection # start selecting text with "v"
bind-key -T copy-mode-vi 'y' send -X copy-selection # copy text with "y"
bind-key -T prefix r switch-client -T clear-history
bind-key -T clear-history h send-keys C-l \; send-keys -R \; clear-history

unbind -T copy-mode-vi MouseDragEnd1Pane # don't exit copy mode after dragging with mouse

# List of plugins
set -g @tpm_plugins ' \
  tmux-plugins/tpm \
  tmux-plugins/tmux-sensible \
  tmux-plugins/tmux-resurrect \
  tmux-plugins/tmux-continuum \
  jimeh/tmux-themepack \
'
set -g @themepack 'basic'

# Custom program name display - check actual process
set -g automatic-rename on
set -g automatic-rename-format '#{pane_current_command}'

set -g @resurrect-capture-pane-contents 'on'
set -g @continuum-restore 'on'

run '/bin/bash ~/.tmux/plugins/tpm/tpm'

# Override themepack settings after plugin loads
# set -g window-status-format " #I:#(~/.tmux/get-program-name.sh #{pane_pid} '#{window_name}')#F "
# set -g window-status-current-format " #I:#(~/.tmux/get-program-name.sh #{pane_pid} '#{window_name}')#F "

# Enable transparency - override theme backgrounds
set -g status-style bg=default,fg=cyan
set -g status-left-style bg=default
set -g status-right-style bg=default
set -g window-status-style bg=default
set -g window-status-current-style bg=default,fg=red,bold
set -g pane-border-style bg=default
set -g pane-active-border-style bg=default,fg=green
